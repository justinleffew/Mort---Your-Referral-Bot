## Codebase Patterns
- (Add only durable, reusable patterns here. Not story-specific notes.)

---

## 2026-01-28 00:00 - INIT
- Initialized progress log.
- Files changed: progress.txt
- Learnings for future iterations:
  - Keep this file append-only.
---
## 2026-01-28 18:31 - US-001
- What was implemented
  - Parse explicit interest cues from contact notes and normalize/merge into radar_interests on note creation.
- Files changed
  - services/dataService.ts
  - prd.json
- Assumptions made (if any)
  - Interpreted explicit interest cues as phrases like "interests/hobbies/likes/enjoys/into/interested in" within notes and normalized them to lowercase keywords.
  - Treated the current HEAD as the base for the required branch because no main branch exists in this repo.
- Tests / checks run (and results)
  - npm run build (pass)
  - Skipped lint/typecheck/tests (no scripts in package.json).
- Learnings for future iterations:
  - Patterns discovered
    - dataService.addNote is the centralized place to augment notes with derived contact metadata.
  - Gotchas
    - None observed.
---
## 2026-01-28 19:27 - US-002
- What was implemented
  - Switched frontend edge function helper to use Supabase functions.invoke and updated OpenAI/TTS calls to new function names.
- Files changed
  - services/edgeFunctions.ts
  - services/openaiService.ts
  - services/dataService.ts
- Assumptions made (if any)
  - Interpreted this change as supporting US-002 without completing all acceptance criteria; PRD status left unchanged per instructions.
  - Supabase functions.invoke will attach auth headers automatically when a session exists, as required.
- Tests / checks run (and results)
  - npx tsc --noEmit (fails: existing type errors in App.tsx, services/dataService.ts, services/supabaseClient.ts, supabase/functions/*)
  - npm run build (pass)
  - Skipped lint/tests (no scripts in package.json).
- Learnings for future iterations:
  - Patterns discovered
    - Edge function calls are centralized via services/edgeFunctions.ts.
  - Gotchas
    - Repo typecheck currently fails due to unrelated TS errors and Deno edge function types.
---
## 2026-01-29 02:56 - US-002
- What was implemented
  - Added an authenticated news search edge function backed by GDELT, plus a client helper to fetch interest + location matches.
  - Enriched interest-based radar prompts with a recent event context when available.
  - Documented the Realtor radar flow and cadence guidance.
- Files changed
  - supabase/functions/mort-news-search/index.ts
  - services/newsService.ts
  - services/openaiService.ts
  - types.ts
  - App.tsx
  - services/dataService.ts
  - tsconfig.json
  - env.d.ts
  - docs/realtor-radar-flow.md
  - prd.json
- Assumptions made (if any)
  - GDELT's public doc API is acceptable as an API-based news source and returns `articles` with `title`, `url`, `seendate`, and `domain` fields.
  - A 30-day timespan and date-sorted results are sufficiently deterministic for the same interest/location input.
- Tests / checks run (and results)
  - npx tsc --noEmit (pass)
  - npm run build (pass)
- Learnings for future iterations:
  - Patterns discovered
    - Event enrichment can be injected into radar prompts without altering UI flows.
  - Gotchas
    - None observed.
---
